<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 09-24-2025
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
  <template if:true={isLoading}>
    <!-- spinner plein Ã©cran SLDS -->
    <div class="slds-spinner_container">
      <lightning-spinner
        alternative-text="Loading"
        size="medium"
        variant="inverse"
      >
      </lightning-spinner>
    </div>
  </template>

  <div class="container" role="main" aria-label="ImportMate project interface">
    <header>
      <div class="sub-container">
        <div class="logo" aria-label="ImportMate logo">
          <lightning-icon
            style="margin-right: 20px"
            icon-name="utility:download"
            alternative-text="Utility download"
            title="download"
          ></lightning-icon>
          ImportMate
          <div class="stepper">
            <c-stepper-component
              current-step={activeStep}
              steps={steps}
              onstepchange={handleStepClick}
            ></c-stepper-component>
          </div>
        </div>
      </div>

      <p class="intro-text">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sodales
        nulla ligula, non lacinia felis finibus in. Proin id mattis elit. Donec
        at nulla metus.
      </p>
    </header>

    <template if:true={currentStep}>
      <template if:true={isStart} aria-label="section start">
        <!-- child here content-->
        <!-- show  recent imported project -->
        <template
          if:false={showCreatorSection}
          aria-label="select project recent section"
        >
          <c-import-project-recent-component
            onshow={openNewProject}
            onselectproject={handleSelectProject}
            projects={importProjects}
          ></c-import-project-recent-component>
        </template>
        <!-- end show  recent imported project -->

        <!-- project creator section -->
        <template
          if:true={showCreatorSection}
          aria-label="creation project section"
        >
          <c-create-project-component
            project-name={projectName}
            description={description}
            target-object={targetObject}
            onnamechange={handleProjectNameChange}
            ondescriptionchange={handleDescriptionChange}
            ontargetchange={handleTargetObjectChange}
            onsave={handleCreateProject}
            oncancel={handleCancel}
          >
          </c-create-project-component>
        </template>
        <!-- end project creator section -->

        <!-- end child content-->
      </template>

      <!-- stepper 2 -->
      <template if:true={isSelectSource} aria-label="select source section">
        <c-data-source-selector
          onprevious={handlePreviousStep}
          recent-project={recentProject}
        >
        </c-data-source-selector>
        
      </template>

      <template
        if:true={isMappingAndTransformation}
        aria-label="mapping & transformation section"
      >
        <h2>Step 3: Mapping & Transformation</h2>
        <p>Ici tu affiches ton composant de mapping.</p>
      </template>
       <template
        if:true={isScheduling}
        aria-label="schedule's section"
      >
        <c-schedule-creator-component
          project-id={recentProject.Id}
          onselect={handleSelectedFrequency}
          onadd={handleAddSchedule}
        >
        </c-schedule-creator-component>
      </template>
    </template>
  </div>
</template>
